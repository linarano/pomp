<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.pompeu.creator.lecture.dao.CreatorLectureDao">

  <resultMap id="lectureListMap" type="lectureList">
   
    <id column="lecture_no" property="lectureNo"/>
    <result column="classTitle" property="classTitle"/>
    <result column="startDate" property="startDate"/>
    <result column="endDate" property="endDate"/>
    <result column="status" property="status"/>
        
    <collection property="times" ofType="lectureTime">
     <id column="no" property="no"/>
     <result column="lecture_no" property="lectureNo"/>
     <result column="startTime" property="startTime"/>
     <result column="endTime" property="endTime"/>
      <result column="maxMember" property="maxMember"/>
      <result column="membercount" property="noMember"/>
    </collection>  

  </resultMap>
  

  <select id="findAllMyclass" resultMap="lectureListMap">
    select
	    le.lecture_no  lectureNo,
	    le.name        classTitle,
	    le.start_date  startDate,
	    le.end_date    endDate,
	    le.status,
	    t.lecture_time_no no,
	    t.lecture_no,
        t.start_time   startTime,
        t.end_time     endTime,
        t.max_member   maxMember,
        t.no_member    membercount
    from
        lecture le
        left outer join lecture_time t on le.lecture_no=t.lecture_no
        order by le.lecture_no desc
    </select>


</mapper>
