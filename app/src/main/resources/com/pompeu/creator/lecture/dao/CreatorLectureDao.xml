<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.pompeu.creator.lecture.dao.CreatorLectureDao">

  <resultMap id="lectureListMap" type="lectureList">
   
    <id column="lecture_no" property="lectureNo"/>
    <result column="creatorNo" property="creatorNo"/>
    <result column="classTitle" property="classTitle"/>
    <result column="startDate" property="startDate"/>
    <result column="endDate" property="endDate"/>
    <result column="status" property="status"/>
        
    <association property="writer" javaType="creator">
      <id column="no" property="no"/>
      <result column="name" property="name"/>
    </association>
        
    <collection property="times" ofType="lectureTime">
     <id column="no" property="no"/>
     <result column="lecture_no" property="lectureNo"/>
     <result column="startTime" property="startTime"/>
     <result column="endTime" property="endTime"/>
      <result column="maxMember" property="maxMember"/>
      <result column="membercount" property="noMember"/>
    </collection>  
    
   <!--
    <collection property="img" ofType="lectureImage">
     <id column="no" property="no"/>
     <result column="lecture_no" property="lectureNo"/>
     <result column="startTime" property="startTime"/>
     <result column="endTime" property="endTime"/>
      <result column="maxMember" property="maxMember"/>
      <result column="membercount" property="noMember"/>
    </collection> 
    
  -->

  </resultMap>
  

  <select id="findAllMyclass" resultMap="lectureListMap" parameterType="int">
     
    select
	    le.lecture_no  lectureNo,
	    le.creator_no creatorNo,
	    le.name        classTitle,
	    le.start_date  startDate,
	    le.end_date    endDate,
	    le.status,
	    t.lecture_time_no no,
	    t.lecture_no,
        t.start_time   startTime,
        t.end_time     endTime,
        t.max_member   maxMember,
        t.no_member    membercount
    from
        lecture le
        join lecture_time t on le.lecture_no=t.lecture_no
        order by le.lecture_no desc
        -->
  <!--
  select
    c.creator_no creatorNo,
    le.lecture_no  lectureNo,
    le.name        classTitle,
    le.start_date  startDate,
    le.end_date    endDate,
    le.status,
    t.lecture_time_no no,
    t.lecture_no,
    t.start_time   startTime,
    t.end_time     endTime,
    t.max_member   maxMember,
    t.no_member    membercount,
    img.image 
  from 
    creator c 
    join lecture le on c.creator_no=le.creator_no
    join lecture_time t on le.lecture_no=t.lecture_no 
    left outer join lecture_image img on le.lecture_no=img.lecture_no
    group by img.lecture_no
    where
    c.creator_no=93
 
    
    select 
		le.creator_no creatorNo,
		le.lecture_no  lectureNo,
		le.name        classTitle,
		le.start_date  startDate,
		le.end_date    endDate,
		le.status,
		t.lecture_time_no no,
		t.lecture_no,
		t.start_time   startTime,
		t.end_time     endTime,
		t.max_member   maxMember,
		t.no_member    membercount
		img.image
    from lecture le
    join lecture_image img on le.lecture_no=img.lecture_no 
    join lecture_time t on le.lecture_no=t.lecture_no
       -->
      
    </select>

</mapper>
